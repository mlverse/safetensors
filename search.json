[{"path":"https://mlverse.github.io/safetensors/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2023 safetensors authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://mlverse.github.io/safetensors/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Daniel Falbel. Author, maintainer. Posit. Copyright holder.","code":""},{"path":"https://mlverse.github.io/safetensors/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Falbel D (2023). safetensors: Safetensors File Format. https://github.com/mlverse/safetensors, https://mlverse.github.io/safetensors/.","code":"@Manual{,   title = {safetensors: Safetensors File Format},   author = {Daniel Falbel},   year = {2023},   note = {https://github.com/mlverse/safetensors, https://mlverse.github.io/safetensors/}, }"},{"path":"https://mlverse.github.io/safetensors/index.html","id":"safetensors","dir":"","previous_headings":"","what":"Safetensors File Format","title":"Safetensors File Format","text":"safetensors pure R implementation safetensors file format. Currently reading files supported.","code":""},{"path":"https://mlverse.github.io/safetensors/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Safetensors File Format","text":"safetensors can installed CRAN : development version safetensors GitHub :","code":"install.packages(\"safetensors\") # install.packages(\"devtools\") devtools::install_github(\"mlverse/safetensors\")"},{"path":"https://mlverse.github.io/safetensors/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Safetensors File Format","text":"’s example writing reading safetensors files:","code":"library(torch) library(safetensors)  tensors <- list(   x = torch_randn(10, 10),   y = torch_ones(10, 10) )  str(tensors) #> List of 2 #>  $ x:Float [1:10, 1:10] #>  $ y:Float [1:10, 1:10]  tmp <- tempfile() safe_save_file(tensors, tmp)  tensors <- safe_load_file(tmp) str(tensors) #> List of 2 #>  $ x:Float [1:10, 1:10] #>  $ y:Float [1:10, 1:10] #>  - attr(*, \"metadata\")=List of 2 #>   ..$ x:List of 3 #>   .. ..$ shape       : int [1:2] 10 10 #>   .. ..$ dtype       : chr \"F32\" #>   .. ..$ data_offsets: int [1:2] 0 400 #>   ..$ y:List of 3 #>   .. ..$ shape       : int [1:2] 10 10 #>   .. ..$ dtype       : chr \"F32\" #>   .. ..$ data_offsets: int [1:2] 400 800 #>  - attr(*, \"max_offset\")= int 929"},{"path":"https://mlverse.github.io/safetensors/reference/safe_load_file.html","id":null,"dir":"Reference","previous_headings":"","what":"Safe load a safetensors file — safe_load_file","title":"Safe load a safetensors file — safe_load_file","text":"Loads safetensors file disk.","code":""},{"path":"https://mlverse.github.io/safetensors/reference/safe_load_file.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Safe load a safetensors file — safe_load_file","text":"","code":"safe_load_file(path, ..., framework = \"torch\", device = \"cpu\")"},{"path":"https://mlverse.github.io/safetensors/reference/safe_load_file.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Safe load a safetensors file — safe_load_file","text":"path Path file load ... Unused framework Framework load data . Currently torch supported device Device copy data loaded","code":""},{"path":"https://mlverse.github.io/safetensors/reference/safe_load_file.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Safe load a safetensors file — safe_load_file","text":"list tensors file. metadata attribute can used find metadata metadata header file.","code":""},{"path":[]},{"path":"https://mlverse.github.io/safetensors/reference/safe_load_file.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Safe load a safetensors file — safe_load_file","text":"","code":"if (rlang::is_installed(\"torch\") && torch::torch_is_installed()) {   tensors <- list(x = torch::torch_randn(10, 10))   temp <- tempfile()   safe_save_file(tensors, temp)   safe_load_file(temp) } #> $x #> torch_tensor #>  0.3021 -0.3472 -0.0472  0.7200  0.1055 -0.1025  1.2279  0.4135 -1.1945  0.2521 #>  0.1440  0.0026 -0.0760  0.5044  0.0146  0.6550  0.9355 -0.4727  0.5521 -2.4796 #>  0.4444 -0.1264 -0.4942 -1.3165  0.2494  0.3524 -0.1956  0.0495  1.3206  1.4762 #> -0.7627  1.0994  0.3755 -0.0958  1.1858  0.6496 -2.4241 -0.2446  0.0537 -1.5890 #> -0.5338  1.7795 -0.9138 -0.1462 -0.1641  1.3610 -1.0699 -1.5311 -0.3163  1.4074 #> -0.6614  0.5374 -1.2029  1.3343 -0.1201  0.2407  1.3484  0.6872  1.2028 -1.1655 #> -0.8651 -1.1734  2.2298 -0.9701  0.3330 -0.2488  0.0693  0.9253 -1.2195  0.0070 #>  0.7864 -1.8697  0.1378 -1.9494  1.6058 -0.5829 -0.7001  0.8409 -0.3419  0.5479 #>  1.2078 -0.7804 -2.3282 -0.9649 -1.4326 -1.7068 -0.1930  0.4248 -0.1832  1.7953 #>  0.1504  0.2883 -0.3296  1.2154  0.2198  0.4031 -0.5461 -0.7966  0.1348  1.7569 #> [ CPUFloatType{10,10} ] #>  #> attr(,\"metadata\") #> attr(,\"metadata\")$x #> attr(,\"metadata\")$x$shape #> [1] 10 10 #>  #> attr(,\"metadata\")$x$dtype #> [1] \"F32\" #>  #> attr(,\"metadata\")$x$data_offsets #> [1]   0 400 #>  #>  #> attr(,\"max_offset\") #> [1] 468"},{"path":"https://mlverse.github.io/safetensors/reference/safe_save_file.html","id":null,"dir":"Reference","previous_headings":"","what":"Writes a list of tensors to the safetensors format — safe_save_file","title":"Writes a list of tensors to the safetensors format — safe_save_file","text":"Writes list tensors safetensors format","code":""},{"path":"https://mlverse.github.io/safetensors/reference/safe_save_file.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Writes a list of tensors to the safetensors format — safe_save_file","text":"","code":"safe_save_file(tensors, path, ..., metadata = NULL)  safe_serialize(tensors, ..., metadata = NULL)"},{"path":"https://mlverse.github.io/safetensors/reference/safe_save_file.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Writes a list of tensors to the safetensors format — safe_save_file","text":"tensors named list tensors. Currently torch tensors supported. path path save tensors . can also binary connection, eg, created file(). ... Currently unused. metadata optional string added file header. Possibly adding additional description weights.","code":""},{"path":"https://mlverse.github.io/safetensors/reference/safe_save_file.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Writes a list of tensors to the safetensors format — safe_save_file","text":"path invisibly raw vector.","code":""},{"path":"https://mlverse.github.io/safetensors/reference/safe_save_file.html","id":"functions","dir":"Reference","previous_headings":"","what":"Functions","title":"Writes a list of tensors to the safetensors format — safe_save_file","text":"safe_serialize(): Serializes tensors returns raw vector.","code":""},{"path":"https://mlverse.github.io/safetensors/reference/safe_save_file.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Writes a list of tensors to the safetensors format — safe_save_file","text":"","code":"if (rlang::is_installed(\"torch\") && torch::torch_is_installed()) {   tensors <- list(x = torch::torch_randn(10, 10))   temp <- tempfile()   safe_save_file(tensors, temp)   safe_load_file(temp)    ser <- safe_serialize(tensors) }"},{"path":"https://mlverse.github.io/safetensors/reference/safetensors.html","id":null,"dir":"Reference","previous_headings":"","what":"Low level control over safetensors files — safetensors","title":"Low level control over safetensors files — safetensors","text":"Low level control safetensors files Low level control safetensors files","code":""},{"path":"https://mlverse.github.io/safetensors/reference/safetensors.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Low level control over safetensors files — safetensors","text":"Allows opening connection safetensors file query tensor names, metadata, etc. Opening connection reads file metadata memory. allows fined grained control reading.","code":""},{"path":"https://mlverse.github.io/safetensors/reference/safetensors.html","id":"public-fields","dir":"Reference","previous_headings":"","what":"Public fields","title":"Low level control over safetensors files — safetensors","text":"con connection object file metadata R list containing metadata header file framework framework used return tensors device device tensors copied max_offset largest offset boundary visited. Mainly used torch find end safetensors file.","code":""},{"path":[]},{"path":"https://mlverse.github.io/safetensors/reference/safetensors.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"Low level control over safetensors files — safetensors","text":"safetensors$new() safetensors$keys() safetensors$get_tensor() safetensors$clone()","code":""},{"path":"https://mlverse.github.io/safetensors/reference/safetensors.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"Low level control over safetensors files — safetensors","text":"Opens connection file","code":""},{"path":"https://mlverse.github.io/safetensors/reference/safetensors.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Low level control over safetensors files — safetensors","text":"","code":"safetensors$new(path, ..., framework = \"torch\", device = \"cpu\")"},{"path":"https://mlverse.github.io/safetensors/reference/safetensors.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Low level control over safetensors files — safetensors","text":"path Path file load ... Unused framework Framework load data . Currently torch supported device Device copy data loaded","code":""},{"path":"https://mlverse.github.io/safetensors/reference/safetensors.html","id":"method-keys-","dir":"Reference","previous_headings":"","what":"Method keys()","title":"Low level control over safetensors files — safetensors","text":"Get keys (tensor names) file","code":""},{"path":"https://mlverse.github.io/safetensors/reference/safetensors.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"Low level control over safetensors files — safetensors","text":"","code":"safetensors$keys()"},{"path":"https://mlverse.github.io/safetensors/reference/safetensors.html","id":"method-get-tensor-","dir":"Reference","previous_headings":"","what":"Method get_tensor()","title":"Low level control over safetensors files — safetensors","text":"Get tensor name","code":""},{"path":"https://mlverse.github.io/safetensors/reference/safetensors.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"Low level control over safetensors files — safetensors","text":"","code":"safetensors$get_tensor(name)"},{"path":"https://mlverse.github.io/safetensors/reference/safetensors.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"Low level control over safetensors files — safetensors","text":"name Name tensor load","code":""},{"path":"https://mlverse.github.io/safetensors/reference/safetensors.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"Low level control over safetensors files — safetensors","text":"objects class cloneable method.","code":""},{"path":"https://mlverse.github.io/safetensors/reference/safetensors.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"Low level control over safetensors files — safetensors","text":"","code":"safetensors$clone(deep = FALSE)"},{"path":"https://mlverse.github.io/safetensors/reference/safetensors.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"Low level control over safetensors files — safetensors","text":"deep Whether make deep clone.","code":""},{"path":"https://mlverse.github.io/safetensors/reference/safetensors.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Low level control over safetensors files — safetensors","text":"","code":"if (rlang::is_installed(\"torch\") && torch::torch_is_installed()) { tensors <- list(x = torch::torch_randn(10, 10)) temp <- tempfile() safe_save_file(tensors, temp) f <- safetensors$new(temp) f$get_tensor(\"x\") } #> torch_tensor #>  1.1804 -0.3142  0.1976 -0.8700  0.0443 -0.3004 -1.6393 -0.3260  1.9044 -0.8599 #> -0.3549  0.9789  0.6902 -0.1616  1.0751  2.1908  0.4934 -0.4736  0.7223  1.0455 #> -0.2041  0.1956  1.2969  1.1338 -0.7884 -0.6917  1.2052 -0.3355 -0.8219 -0.3380 #> -1.1249 -2.0818 -0.5803 -0.1766 -0.7536  0.9766 -1.7854  0.4643  1.6063 -0.1190 #>  0.2299 -0.6447 -3.1338  0.6050  0.3366 -0.9615  0.2022  1.0121  1.1025  1.1744 #>  1.0192  0.8843 -0.3765  0.5626 -1.0618 -0.9129 -1.9460 -1.2163  0.8260 -0.5494 #>  0.0192 -0.5617  0.3873 -0.4411 -0.6538 -0.5443  2.1720 -0.4059  1.0676 -0.4137 #>  0.4265 -0.9520 -0.7264  0.2073 -0.6777  1.0472  1.0987  2.0385  2.5818 -0.2054 #> -1.0101 -0.3009 -0.8770 -1.0904  2.1091 -1.2257 -0.5884 -0.2267 -2.2031 -0.4471 #>  1.0752 -1.3419  1.0093 -2.2991  0.3415 -0.0490 -1.4669  1.3893 -0.3536 -0.2934 #> [ CPUFloatType{10,10} ]"}]
